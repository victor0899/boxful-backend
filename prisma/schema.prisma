generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id             String   @id @default(auto()) @map("_id") @db.ObjectId
  firstName      String
  lastName       String
  gender         String
  birthDate      DateTime
  whatsappCode   String
  whatsappNumber String
  email          String   @unique
  password       String
  orders         Order[]
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  @@map("users")
}

model Order {
  id                 String    @id @default(auto()) @map("_id") @db.ObjectId
  userId             String    @db.ObjectId
  user               User      @relation(fields: [userId], references: [id])
  // Nuevos campos
  pickupAddress      String
  scheduledDate      DateTime?
  firstName          String
  lastName           String
  phoneCode          String
  phoneNumber        String
  instructions       String?
  // Campos existentes (calculados autom√°ticamente por compatibilidad)
  clientName         String
  clientEmail        String?
  clientPhone        String
  clientAddress      String
  clientDepartment   String
  clientMunicipality String
  clientReference    String?
  packages           Package[]
  status             String    @default("PENDING")
  isCOD              Boolean   @default(false)
  codExpectedAmount  Float?
  codCollectedAmount Float?
  shippingCost       Float?
  codCommission      Float?
  settlementAmount   Float?
  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @updatedAt
  deliveredAt        DateTime?
}

type Package {
  description String
  weight      Float
  height      Float
  width       Float
  length      Float
  quantity    Int    @default(1)
}

model ShippingCost {
  id        String @id @default(auto()) @map("_id") @db.ObjectId
  dayOfWeek Int    @unique
  dayName   String
  cost      Float
}
